<div>
  <button (click)="addMoreItems()">Add more items</button>

  <!-- Display the equipment list in a table -->
  <table>
    <thead>
      <tr>
        <th>Equipment</th>
        <th>Count</th>
        <th>Remove</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of reservationItems">
        <td>
          <div class="equipment-card">
            <h3>{{ item.equipment.name }}</h3>
            <p>Type: {{ item.equipment.type }}</p>
            <p>Price: {{ item.equipment.price }}</p>
            <p>Description: {{ item.equipment.description }}</p>
            <p>Available: {{ item.equipment.count }}</p>
          </div>
        </td>
        <td>
          <!-- Input for equipment count -->
          <input class="input" type="number" [(ngModel)]="item.count" (change)="onCountChange" />
        </td>
        <td>
          <button (click)="removeItem(item)">Remove</button>
        </td>
      </tr>
    </tbody>
  </table>

  <div>
    <label>
      <input type="radio" [(ngModel)]="selectedOption" value="predefined" />Predefined appointment
    </label>
    <label>
      <input type="radio" [(ngModel)]="selectedOption" value="custom" /> Custom appointment
    </label>
  </div>
  <div *ngIf="selectedOption === 'predefined'">
    <label for="appointmentOption">Select Appointment:</label>
    <select id="appointmentOption" name="appointmentOption" [(ngModel)]="selectedAppointment">
      <ng-container *ngFor="let appointment of availableAppointments">
        <option [value]="appointment.id">
          {{ formatDate(appointment.date) }} - {{ formatTime(appointment.startTime) }} to {{
          formatTime(appointment.endTime) }}
        </option>
      </ng-container>
    </select>
    <button (click)="makeReservation()">Make reservation</button>
  </div>

  <div *ngIf="selectedOption === 'custom'">
    <div>
      <form (ngSubmit)="onFormSubmit()" style="margin-bottom: 20px; margin-top: 20px">
        <div style="padding-top: 8px;">
          <mat-form-field>
            <input matInput [matDatepicker]="picker" placeholder="Choose a date" [min]="minDate" readonly
              [(ngModel)]="selectedDate" name="selectedDate">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>

        <div style="display: flex; gap: 8px; padding-top: 8px;">
          <mat-form-field appearance="fill" style="width: 200px;">
            <input matInput type="text" placeholder="Start (HH:mm)" pattern="[0-2][0-9]:[0-5][0-9]"
              [(ngModel)]="startTime" name="startTime" required #startTimeInput="ngModel">
            <mat-error *ngIf="startTimeInput.invalid && (startTimeInput.dirty || startTimeInput.touched)">
              Start time should be in HH:mm format
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="fill" style="width: 200px;">
            <input matInput type="text" placeholder="End (HH:mm)" pattern="[0-2][0-9]:[0-5][0-9]" [(ngModel)]="endTime"
              name="endTime" required #endTimeInput="ngModel">
            <mat-error *ngIf="endTimeInput.invalid && (endTimeInput.dirty || endTimeInput.touched)">
              End time should be in HH:mm format
            </mat-error>
          </mat-form-field>
        </div>


        <button mat-raised-button color="primary" type="submit" [disabled]="!isFormValid()" style="margin-top: 16px;">
          Submit
        </button>

      </form>
    </div>
  </div>
</div>